# âœ… ä½ çš„ç•…ç†é¢˜åº“é…ç½®è¯´æ˜

## ğŸ‰ é…ç½®è¿›åº¦ï¼š80% å®Œæˆï¼

å·²å®Œæˆçš„é…ç½®ï¼š
- âœ… Supabase URL: `https://tnyxwwhnlfocoamisxen.supabase.co`
- âœ… Gemini API Key: `AIzaSyCeYYDrqezoDbkvt05FYOA2PUMDck5Qr5g`
- âœ… Redis: å·²å®‰è£…å¹¶è¿è¡Œ
- âœ… JWT Secret: å·²è‡ªåŠ¨ç”Ÿæˆ

å‰©ä½™é…ç½®ï¼š
- âš ï¸ éœ€è¦è·å– Supabase service_role key
- âš ï¸ éœ€è¦åˆå§‹åŒ–æ•°æ®åº“è¡¨

---

## ğŸ”‘ æœ€åä¸¤æ­¥é…ç½®

### æ­¥éª¤ 1ï¼šè·å– service_role keyï¼ˆ2åˆ†é’Ÿï¼‰

#### æ–¹æ³• 1ï¼šç›´æ¥è®¿é—®é“¾æ¥ï¼ˆæœ€ç®€å•ï¼‰

**ç‚¹å‡»è¿™ä¸ªé“¾æ¥**ï¼š
```
https://supabase.com/dashboard/project/tnyxwwhnlfocoamisxen/settings/api
```

#### æ–¹æ³• 2ï¼šæ‰‹åŠ¨å¯¼èˆª

1. è®¿é—® https://supabase.com
2. ç™»å½•ä½ çš„è´¦å·
3. é€‰æ‹©é¡¹ç›® `tnyxwwhnlfocoamisxen`
4. å·¦ä¾§èœå• â†’ **Settings**ï¼ˆé½¿è½®å›¾æ ‡ï¼‰â†’ **API**
5. æ‰¾åˆ° **"Project API keys"** éƒ¨åˆ†
6. æ‰¾åˆ° **"service_role (secret)"** è¿™ä¸€è¡Œ
7. ç‚¹å‡»å³ä¾§çš„ ğŸ‘ï¸ çœ¼ç›å›¾æ ‡æ˜¾ç¤ºå®Œæ•´å†…å®¹
8. å¤åˆ¶é‚£ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼ˆä»¥ `eyJhbGci` å¼€å¤´ï¼‰

#### âš ï¸ é‡è¦åŒºåˆ«

```
âŒ é”™è¯¯ï¼šsb_publishable_n2cDkupI_MI9fw9zy67Iow_QvpQczU0
         ï¼ˆè¿™æ˜¯ publishable keyï¼Œä¸èƒ½ç”¨äºæœåŠ¡ç«¯ï¼‰

âœ… æ­£ç¡®ï¼šeyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        ï¼ˆè¿™æ˜¯ service_role keyï¼Œä»¥ eyJhbGci å¼€å¤´ï¼‰
```

#### æ›´æ–°é…ç½®æ–‡ä»¶

è·å–åˆ° service_role key åï¼Œç¼–è¾‘ `.env.local` æ–‡ä»¶ï¼š

```bash
# æ‰“å¼€æ–‡ä»¶
open .env.local  # macOS
# æˆ–ç”¨ä»»ä½•æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€
```

æ‰¾åˆ°è¿™ä¸€è¡Œï¼š
```bash
SUPABASE_SERVICE_ROLE_KEY=è¯·æ›¿æ¢ä¸ºservice_role_key
```

æ›¿æ¢ä¸ºï¼š
```bash
SUPABASE_SERVICE_ROLE_KEY=ä½ å¤åˆ¶çš„service_role_key
```

ä¿å­˜æ–‡ä»¶ã€‚

---

### æ­¥éª¤ 2ï¼šåˆå§‹åŒ–æ•°æ®åº“ï¼ˆ3åˆ†é’Ÿï¼‰

#### æ–¹æ³• 1ï¼šä½¿ç”¨ Supabase æ§åˆ¶å°ï¼ˆæ¨èï¼‰

1. è®¿é—®ï¼šhttps://supabase.com/dashboard/project/tnyxwwhnlfocoamisxen
2. å·¦ä¾§èœå•ç‚¹å‡» **SQL Editor**ï¼ˆå›¾æ ‡æ˜¯ `>`ï¼‰
3. ç‚¹å‡» **"New query"**
4. æ‰“å¼€é¡¹ç›®æ–‡ä»¶å¤¹ä¸­çš„ `database/schema.sql` æ–‡ä»¶
5. å¤åˆ¶æ–‡ä»¶çš„å…¨éƒ¨å†…å®¹
6. ç²˜è´´åˆ° SQL Editor ä¸­
7. ç‚¹å‡» **"Run"** æŒ‰é’®ï¼ˆæˆ–æŒ‰ `âŒ˜/Ctrl + Enter`ï¼‰

#### æ–¹æ³• 2ï¼šä½¿ç”¨ Supabase CLIï¼ˆé«˜çº§ï¼‰

```bash
# å®‰è£… Supabase CLIï¼ˆå¦‚æœè¿˜æ²¡å®‰è£…ï¼‰
brew install supabase/tap/supabase

# é“¾æ¥åˆ°é¡¹ç›®
supabase link --project-ref tnyxwwhnlfocoamisxen

# æ¨é€ schema
supabase db push
```

#### éªŒè¯è¡¨åˆ›å»º

1. åœ¨ Supabase æ§åˆ¶å°ï¼Œå·¦ä¾§èœå•ç‚¹å‡» **Table Editor**
2. åº”è¯¥èƒ½çœ‹åˆ°ä»¥ä¸‹è¡¨ï¼š
   - âœ… users
   - âœ… quizzes
   - âœ… user_progress
   - âœ… wrong_questions
   - âœ… ai_conversations
   - âœ… ai_usage
   - âœ… error_reports
   - âœ… jobs
   - âœ… parse_logs

---

## ğŸš€ å¯åŠ¨é¡¹ç›®

å®Œæˆä»¥ä¸Šä¸¤æ­¥åï¼Œå¯åŠ¨é¡¹ç›®ï¼š

```bash
# 1. è¿è¡Œç¯å¢ƒæ£€æŸ¥
./check-env.sh

# 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# 3. æ–°å¼€ä¸€ä¸ªç»ˆç«¯çª—å£ï¼Œå¯åŠ¨ Worker
npm run worker
```

---

## ğŸŒ è®¿é—®åº”ç”¨

å¯åŠ¨æˆåŠŸåï¼Œè®¿é—®ï¼š

- **å®¢æˆ·ç«¯é¦–é¡µ**: http://localhost:3000
- **æ³¨å†Œé¡µé¢**: http://localhost:3000/register
- **ç®¡ç†é¢æ¿**: http://localhost:3000/admin

---

## ğŸ“‹ å¿«é€Ÿå‚è€ƒ

### ä½ çš„é…ç½®ä¿¡æ¯

| é…ç½®é¡¹ | å€¼ |
|--------|-----|
| Supabase URL | `https://tnyxwwhnlfocoamisxen.supabase.co` |
| Supabase é¡¹ç›® ID | `tnyxwwhnlfocoamisxen` |
| Gemini API Key | `AIzaSyCeYYDrqezoDbkvt05FYOA2PUMDck5Qr5g` |
| Redis | `redis://localhost:6379` |
| JWT Secret | `KGBVhv+nyixLGmrKQ4sqr87AvFq2MBb5B0e5aTIdu8I=` |

### é‡è¦é“¾æ¥

- Supabase æ§åˆ¶å°ï¼šhttps://supabase.com/dashboard/project/tnyxwwhnlfocoamisxen
- Supabase API è®¾ç½®ï¼šhttps://supabase.com/dashboard/project/tnyxwwhnlfocoamisxen/settings/api
- Supabase SQL Editorï¼šhttps://supabase.com/dashboard/project/tnyxwwhnlfocoamisxen/sql

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: æ‰¾ä¸åˆ° service_role key
**A**: ç¡®ä¿ä½ åœ¨æ­£ç¡®çš„é¡µé¢ï¼š
1. é¡¹ç›® Settings â†’ API
2. åœ¨ "Project API keys" éƒ¨åˆ†
3. å‘ä¸‹æ»šåŠ¨ï¼Œæ‰¾åˆ° "service_role (secret)"
4. ç‚¹å‡» ğŸ‘ï¸ å›¾æ ‡æ˜¾ç¤ºå®Œæ•´å†…å®¹

### Q2: æ•°æ®åº“è¡¨å·²ç»å­˜åœ¨
**A**: å¦‚æœè¡¨å·²ç»å­˜åœ¨ï¼ŒSQL ä¼šæŠ¥é”™ä½†ä¸ä¼šå½±å“ä½¿ç”¨ã€‚ä½ å¯ä»¥ï¼š
- å¿½ç•¥é”™è¯¯
- æˆ–å…ˆåˆ é™¤è¡¨å†é‡æ–°è¿è¡Œ

### Q3: Redis è¿æ¥å¤±è´¥
**A**: ç¡®ä¿ Redis æ­£åœ¨è¿è¡Œï¼š
```bash
brew services start redis
# éªŒè¯
redis-cli ping  # åº”è¯¥è¿”å› PONG
```

### Q4: npm run dev å¯åŠ¨å¤±è´¥
**A**: æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®åŠ è½½ï¼š
```bash
# æŸ¥çœ‹ .env.local å†…å®¹
cat .env.local

# ç¡®è®¤æ²¡æœ‰å¤šä½™ç©ºæ ¼æˆ–æ¢è¡Œ
```

---

## ğŸ†˜ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹ [è·å–é…ç½®æŒ‡å—.md](./è·å–é…ç½®æŒ‡å—.md)
2. è¿è¡Œ `./check-env.sh` æ£€æŸ¥é…ç½®
3. æŸ¥çœ‹ç»ˆç«¯é”™è¯¯ä¿¡æ¯

---

**é…ç½®å®Œæˆåï¼Œä½ å°±å¯ä»¥å¼€å§‹ä½¿ç”¨ç•…ç†é¢˜åº“äº†ï¼** ğŸ‰
