# ğŸ”‘ å¦‚ä½•è·å–å„ä¸ªé…ç½®çš„è¯¦ç»†å›¾æ–‡æŒ‡å—

## 1ï¸âƒ£ Supabase é…ç½®ï¼ˆå¿…éœ€ï¼‰

### æ­¥éª¤ 1ï¼šåˆ›å»º Supabase é¡¹ç›®

1. è®¿é—® **https://supabase.com**
2. ç‚¹å‡» **"Start your project"** æˆ– **"Sign Up"**
3. ä½¿ç”¨ GitHub æˆ–é‚®ç®±æ³¨å†Œè´¦å·
4. ç™»å½•åï¼Œç‚¹å‡» **"New Project"**

### æ­¥éª¤ 2ï¼šåˆ›å»ºé¡¹ç›®

å¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š
- **Organization**: é€‰æ‹©æˆ–åˆ›å»ºç»„ç»‡ï¼ˆå…è´¹ï¼‰
- **Name**: è¾“å…¥é¡¹ç›®åç§°ï¼Œå¦‚ `changli-oj`
- **Database Password**: è®¾ç½®å¯†ç ï¼ˆ**è®°ä½è¿™ä¸ªå¯†ç **ï¼‰
- **Region**: é€‰æ‹© `Southeast Asia (Singapore)` æˆ–ç¦»ä½ æœ€è¿‘çš„åŒºåŸŸ
- **Pricing Plan**: é€‰æ‹© **Free**ï¼ˆå…è´¹ï¼‰

ç‚¹å‡» **"Create new project"**ï¼Œç­‰å¾… 2-3 åˆ†é’Ÿåˆ›å»ºå®Œæˆã€‚

### æ­¥éª¤ 3ï¼šè·å– API Keys

é¡¹ç›®åˆ›å»ºå®Œæˆåï¼š

1. åœ¨å·¦ä¾§èœå•æ‰¾åˆ° **Settings**ï¼ˆé½¿è½®å›¾æ ‡ï¼‰
2. ç‚¹å‡» **API**
3. åœ¨é¡µé¢ä¸­æ‰¾åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼š

```
âœ… å¤åˆ¶è¿™ä¸¤é¡¹ï¼š

Project URL: https://xxxxx.supabase.co
     â†“ å¤åˆ¶è¿™ä¸ªåˆ° SUPABASE_URL

service_role (secret): eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
     â†“ å¤åˆ¶è¿™ä¸ªåˆ° SUPABASE_SERVICE_ROLE_KEY
```

**âš ï¸ é‡è¦æç¤º**ï¼š
- âœ… ä½¿ç”¨ **`service_role`** keyï¼ˆæœ‰ secret æ ‡è®°çš„é‚£ä¸ªï¼‰
- âŒ ä¸è¦ä½¿ç”¨ `anon` key
- ğŸ”’ **åƒä¸‡ä¸è¦æ³„éœ²** service_role key

### æ­¥éª¤ 4ï¼šåˆå§‹åŒ–æ•°æ®åº“

1. åœ¨å·¦ä¾§èœå•ç‚¹å‡» **SQL Editor**ï¼ˆå›¾æ ‡æ˜¯ `>`ï¼‰
2. ç‚¹å‡» **"New query"**
3. æ‰“å¼€é¡¹ç›®æ–‡ä»¶å¤¹ä¸­çš„ `database/schema.sql` æ–‡ä»¶
4. å¤åˆ¶å…¨éƒ¨å†…å®¹
5. ç²˜è´´åˆ° SQL Editor ä¸­
6. ç‚¹å‡» **"Run"** æˆ–æŒ‰ `âŒ˜/Ctrl + Enter`

### æ­¥éª¤ 5ï¼šéªŒè¯è¡¨åˆ›å»º

1. åœ¨å·¦ä¾§èœå•ç‚¹å‡» **Table Editor**
2. åº”è¯¥èƒ½çœ‹åˆ°ä»¥ä¸‹è¡¨ï¼š
   - âœ… users
   - âœ… quizzes
   - âœ… user_progress
   - âœ… wrong_questions
   - âœ… ai_conversations
   - âœ… ai_usage
   - âœ… error_reports
   - âœ… jobs
   - âœ… parse_logs

---

## 2ï¸âƒ£ Gemini API Keyï¼ˆå¯é€‰ä½†æ¨èï¼‰

### æ­¥éª¤ 1ï¼šè®¿é—® Google AI Studio

1. è®¿é—® **https://aistudio.google.com/app/apikey**
2. ä½¿ç”¨ Google è´¦å·ç™»å½•

### æ­¥éª¤ 2ï¼šåˆ›å»º API Key

1. ç‚¹å‡» **"Create API Key"** æŒ‰é’®
2. é€‰æ‹©æˆ–åˆ›å»ºä¸€ä¸ª Google Cloud é¡¹ç›®
3. å¤åˆ¶ç”Ÿæˆçš„ API Key

```
âœ… å¤åˆ¶ API Key åˆ° GEMINI_API_KEY
æ ¼å¼ï¼šAIzaSyDaGmWKa4JsXZ-HjGw7ISLn_3namBGewQe
```

### å…è´¹é…é¢

- âœ… æ¯åˆ†é’Ÿ 15 æ¬¡è¯·æ±‚
- âœ… æ¯å¤© 1,500 æ¬¡è¯·æ±‚
- ğŸ’° å¯¹äº MVP è¶³å¤Ÿä½¿ç”¨

---

## 3ï¸âƒ£ Redis é…ç½®ï¼ˆå¿…éœ€ï¼‰

### é€‰é¡¹ Aï¼šæœ¬åœ°å®‰è£…ï¼ˆå¼€å‘ç¯å¢ƒæ¨èï¼‰

#### macOSï¼š

```bash
# å®‰è£… Redis
brew install redis

# å¯åŠ¨ Redis
brew services start redis

# éªŒè¯è¿è¡Œ
redis-cli ping
# åº”è¯¥è¿”å›ï¼šPONG
```

#### Windowsï¼š

ä¸‹è½½ Redis for Windows æˆ–ä½¿ç”¨ WSL

#### Linuxï¼š

```bash
sudo apt-get install redis-server
sudo systemctl start redis
```

**æœ¬åœ° Redis çš„é…ç½®ï¼š**
```
REDIS_URL=redis://localhost:6379
```

---

### é€‰é¡¹ Bï¼šUpstashï¼ˆå…è´¹ï¼Œæ¨èç”¨äºç”Ÿäº§ï¼‰

#### æ­¥éª¤ 1ï¼šæ³¨å†Œ Upstash

1. è®¿é—® **https://upstash.com**
2. ç‚¹å‡» **"Start Free"** æˆ– **"Sign Up"**
3. ä½¿ç”¨ GitHub æˆ–é‚®ç®±æ³¨å†Œ

#### æ­¥éª¤ 2ï¼šåˆ›å»º Redis æ•°æ®åº“

1. ç™»å½•åï¼Œç‚¹å‡» **"Create Database"**
2. å¡«å†™ä¿¡æ¯ï¼š
   - **Database Name**: `changli-oj-redis`
   - **Region**: é€‰æ‹©ç¦»ä½ æœ€è¿‘çš„åŒºåŸŸ
   - **Tier**: é€‰æ‹© **Free**ï¼ˆå…è´¹ï¼‰
3. ç‚¹å‡» **"Create"**

#### æ­¥éª¤ 3ï¼šè·å–è¿æ¥ä¿¡æ¯

1. æ•°æ®åº“åˆ›å»ºåï¼Œç‚¹å‡» **Details**
2. æ‰¾åˆ° **"REST API"** æˆ– **"Redis Connection"**
3. å¤åˆ¶è¿æ¥å­—ç¬¦ä¸²

```
âœ… å¤åˆ¶è¿æ¥å­—ç¬¦ä¸²åˆ° REDIS_URL
æ ¼å¼ï¼šrediss://default:xxxxx@xxxxx.upstash.io:6379
```

**å…è´¹é…é¢ï¼š**
- âœ… 10K å‘½ä»¤/å¤©
- âœ… 256MB å­˜å‚¨
- ğŸ’° å¯¹äº MVP è¶³å¤Ÿä½¿ç”¨

---

### é€‰é¡¹ Cï¼šRedis Cloudï¼ˆå…è´¹ï¼‰

#### æ­¥éª¤ 1ï¼šæ³¨å†Œ Redis Cloud

1. è®¿é—® **https://redis.com/try-free/**
2. ç‚¹å‡» **"Get Started Free"**
3. æ³¨å†Œè´¦å·

#### æ­¥éª¤ 2ï¼šåˆ›å»ºæ•°æ®åº“

1. ç™»å½•åï¼Œç‚¹å‡» **"Create Database"**
2. é€‰æ‹© **Free** å¥—é¤
3. é€‰æ‹©åŒºåŸŸ
4. åˆ›å»ºåå¤åˆ¶ **Connection String**

---

## 4ï¸âƒ£ JWT Secretï¼ˆå¿…éœ€ï¼‰

è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„éšæœºå­—ç¬¦ä¸²ï¼Œç”¨äºåŠ å¯†ç”¨æˆ·ç™»å½•ä¿¡æ¯ã€‚

### ç”Ÿæˆéšæœºå­—ç¬¦ä¸²ï¼š

#### æ–¹å¼ 1ï¼šä½¿ç”¨åœ¨çº¿å·¥å…·
è®¿é—® **https://www.uuidgenerator.net/api/guid** å¤åˆ¶ç”Ÿæˆçš„ UUID

#### æ–¹å¼ 2ï¼šä½¿ç”¨å‘½ä»¤è¡Œ

```bash
# macOS/Linux
openssl rand -base64 32

# æˆ–ä½¿ç”¨ Node.js
node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
```

#### æ–¹å¼ 3ï¼šæ‰‹åŠ¨è¾“å…¥
éšæ„è¾“å…¥ä¸€ä¸ªé•¿å­—ç¬¦ä¸²ï¼Œå¦‚ï¼š`changli-dev-secret-2024-abc123`

**é…ç½®ç¤ºä¾‹ï¼š**
```
JWT_SECRET=changli-dev-secret-2024-abc123xyz
```

---

## 5ï¸âƒ£ ç®¡ç†å‘˜é‚®ç®±ï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ æƒ³é™åˆ¶è°èƒ½è®¿é—®ç®¡ç†é¢æ¿ï¼Œé…ç½®è¿™ä¸ªå˜é‡ã€‚

### é…ç½®ç¤ºä¾‹ï¼š

```
# å•ä¸ªç®¡ç†å‘˜
ADMIN_EMAILS=admin@example.com

# å¤šä¸ªç®¡ç†å‘˜ï¼ˆç”¨è‹±æ–‡é€—å·åˆ†éš”ï¼‰
ADMIN_EMAILS=admin@example.com,manager@example.com,superadmin@example.com
```

**ä¸é…ç½®çš„è¯**ï¼šæ‰€æœ‰å·²ç™»å½•ç”¨æˆ·éƒ½å¯ä»¥è®¿é—®ç®¡ç†é¢æ¿ã€‚

---

## âœ… é…ç½®å®Œæˆæ£€æŸ¥æ¸…å•

é…ç½®å®Œæ‰€æœ‰å˜é‡åï¼Œä½ çš„ `.env.local` åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š

```bash
# âœ… Supabase
SUPABASE_URL=https://abc123.supabase.co
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# âœ… JWT
JWT_SECRET=changli-dev-secret-2024-abc123xyz

# âœ… Redis
REDIS_URL=redis://localhost:6379
# æˆ–ä½¿ç”¨ Upstash: rediss://default:xxxxx@xxxxx.upstash.io:6379

# âœ… Geminiï¼ˆå¯é€‰ï¼‰
GEMINI_API_KEY=AIzaSyDaGmWKa4JsXZ-HjGw7ISLn_3namBGewQe

# âœ… ç®¡ç†å‘˜ï¼ˆå¯é€‰ï¼‰
ADMIN_EMAILS=admin@example.com
```

---

## ğŸš€ é…ç½®å®Œæˆå

1. **è¿è¡Œç¯å¢ƒæ£€æŸ¥**ï¼š
```bash
./check-env.sh
```

2. **å¯åŠ¨é¡¹ç›®**ï¼š
```bash
# ç»ˆç«¯1
npm run dev

# ç»ˆç«¯2
npm run worker
```

3. **è®¿é—®åº”ç”¨**ï¼š
   - æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:3000
   - æ³¨å†Œè´¦å· â†’ ç™»å½• â†’ è®¿é—®ç®¡ç†é¢æ¿

---

## ğŸ†˜ é‡åˆ°é—®é¢˜ï¼Ÿ

### é—®é¢˜ 1ï¼šSupabase URL æ‰¾ä¸åˆ°
**è§£å†³**ï¼šåœ¨ Supabase æ§åˆ¶å° â†’ Settings â†’ API â†’ Project URL

### é—®é¢˜ 2ï¼šService Role Key æ‰¾ä¸åˆ°
**è§£å†³**ï¼šåœ¨ Supabase æ§åˆ¶å° â†’ Settings â†’ API â†’ service_role (secret)

### é—®é¢˜ 3ï¼šRedis è¿æ¥å¤±è´¥
**è§£å†³**ï¼š
```bash
# æ£€æŸ¥ Redis æ˜¯å¦è¿è¡Œ
redis-cli ping

# å¦‚æœè¿”å› PONGï¼Œè¯´æ˜æ­£å¸¸
# å¦‚æœæŠ¥é”™ï¼Œå¯åŠ¨ Redisï¼š
brew services start redis
```

### é—®é¢˜ 4ï¼šGemini API Key ä¸èµ·ä½œç”¨
**è§£å†³**ï¼š
- ç¡®è®¤å¤åˆ¶çš„æ˜¯å®Œæ•´çš„ API Key
- æ£€æŸ¥æ˜¯å¦æœ‰å¤šä½™çš„ç©ºæ ¼
- å…ˆä¸é…ç½®ä¹Ÿå¯ä»¥ï¼ˆä¼šä½¿ç”¨ Mock æ¨¡å¼ï¼‰

---

## ğŸ“ éœ€è¦æ›´å¤šå¸®åŠ©ï¼Ÿ

å¦‚æœä»¥ä¸Šæ­¥éª¤è¿˜æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æŸ¥çœ‹ [ç¯å¢ƒå˜é‡é…ç½®æŒ‡å—.md](./ç¯å¢ƒå˜é‡é…ç½®æŒ‡å—.md)
2. æŸ¥çœ‹ [å¿«é€Ÿé…ç½®å¡ç‰‡.md](./å¿«é€Ÿé…ç½®å¡ç‰‡.md)
3. è¿è¡Œ `./check-env.sh` æ£€æŸ¥é…ç½®

**ç¥ä½ é…ç½®é¡ºåˆ©ï¼** ğŸ‰
